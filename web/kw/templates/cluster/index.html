{% extends "base.html" %}
{% block title %}Clusters{% endblock %}

{% block content %}
<div class="card">
  <div class="section-title">Clusters</div>
  <div class="row" style="margin-bottom:14px; justify-content:space-between;">
    <div class="row">
      <form method="get" class="row">
        <input type="text" name="query" value="{{ query }}" placeholder="Search by name or seed or intent">
        <button class="btn secondary" type="submit">Search</button>
      </form>
    </div>
    <div>
      <a class="btn" href="{% url 'kw:cluster_create' %}">+ New cluster</a>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Seed keyword</th>
        <th>Intent</th>
        <th>Created</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for cluster in page.object_list %}
      <tr>
        <td>{{ cluster.name }}</td>
        <td>{{ cluster.seed_keyword }}</td>
        <td>{{ cluster.intent }}</td>
        <td class="muted">{{ cluster.created_at }}</td>
        <td style="text-align:right;">
          <a class="btn secondary" href="{% url 'kw:cluster_edit' cluster.id %}">Edit</a>
          <form method="post" action="{% url 'kw:cluster_delete' cluster.id %}" style="display:inline" onsubmit="return confirm('Delete this cluster?');">
            {% csrf_token %}
            <button class="btn danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="muted">Empty Data.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="row" style="justify-content:flex-end; margin-top:12px;">
    {% if page.has_previous %}
      <a class="btn secondary" href="?page={{ page.prev_page }}&query={{ query|urlencode }}">Prev</a>
    {% endif %}
  
    <span class="muted" style="margin:0 10px;">
      Page {{ page.number }} of {{ page.paginator.num_pages }}
    </span>
  
    {% if page.has_next %}
      <a class="btn secondary" href="?page={{ page.next_page }}&query={{ query|urlencode }}">Next</a>
    {% endif %}
  </div>
</div>
{% endblock %}